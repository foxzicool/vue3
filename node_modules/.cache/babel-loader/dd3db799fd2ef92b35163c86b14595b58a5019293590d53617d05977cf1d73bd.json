{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelDynamic as _vModelDynamic, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nimport _imports_0 from '../assets/logo.png';\nconst _hoisted_1 = {\n  class: \"whole\"\n};\nconst _hoisted_2 = {\n  class: \"background_div\"\n};\nconst _hoisted_3 = {\n  class: \"login_background\"\n};\nconst _hoisted_4 = {\n  class: \"login_div\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"login_header_top_div\\\"></div><div class=\\\"login_header_div\\\"><div class=\\\"login_header_logo_div\\\"><img id=\\\"login_header_logo_img\\\" class=\\\"login_header_logo_img\\\" src=\\\"\" + _imports_0 + \"\\\"></div><div id=\\\"header_title_text\\\" class=\\\"login_header_text_div\\\" data-langKey=\\\"index.header.title.text\\\"> Hello , Welcome Back! </div></div>\", 2);\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"input_sep_line_2\"\n}, null, -1);\nconst _hoisted_8 = {\n  class: \"input_div\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"input_sep_line_3\"\n}, null, -1);\nconst _hoisted_10 = {\n  class: \"input_div\"\n};\nconst _hoisted_11 = [\"type\"];\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"input_sep_line_4\"\n}, null, -1);\nconst _hoisted_13 = {\n  key: 0,\n  class: \"login_message_div\"\n};\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"line\",\n  id: \"line1\"\n}, null, -1);\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"line\",\n  id: \"line2\"\n}, null, -1);\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"line\",\n  id: \"line3\"\n}, null, -1);\nconst _hoisted_17 = {\n  key: 1,\n  id: \"error_message\"\n};\nconst _hoisted_18 = {\n  class: \"login_button_div\"\n};\nconst _hoisted_19 = {\n  class: \"input_div button_div_first_margin_top\"\n};\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"login_text_div\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"login_text\",\n  \"data-langKey\": \"index.button.login.text\"\n}, \" Sign In \")], -1);\nconst _hoisted_21 = [_hoisted_20];\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"login_bottom_div\"\n}, null, -1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"form\", {\n    id: \"login_input_div\",\n    class: \"login_input_div\",\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.signIn && $options.signIn(...args), [\"prevent\"]))\n  }, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    tabindex: \"2\",\n    name: \"userid\",\n    id: \"userid_inputtext\",\n    class: \"login_textfield\",\n    placeholder: \"User ID (4 - 20 characters)\",\n    type: \"text\",\n    spellcheck: \"false\",\n    \"aria-label\": \"User ID\",\n    minlength: \"4\",\n    maxlength: \"250\",\n    autocomplete: \"off\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.user.username = $event)\n  }, null, 512), [[_vModelText, $data.user.username]])]), _hoisted_9, _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    tabindex: \"3\",\n    name: \"password\",\n    id: \"password_inputtext\",\n    class: \"login_textfield\",\n    placeholder: \"Password (4 - 20 characters)\",\n    spellcheck: \"false\",\n    \"aria-label\": \"Password\",\n    type: $data.showPassword ? 'text' : 'password',\n    minlength: \"6\",\n    maxlength: \"16\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.user.password = $event)\n  }, null, 8, _hoisted_11), [[_vModelDynamic, $data.user.password]]), _createElementVNode(\"i\", {\n    class: _normalizeClass([\"fa eye password-icon\", {\n      'fa-eye-slash': $data.showPassword,\n      'fa-eye': !$data.showPassword\n    }]),\n    onClick: _cache[2] || (_cache[2] = $event => $data.showPassword = !$data.showPassword)\n  }, null, 2)]), _hoisted_12, $data.isSigningIn ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_hoisted_14, _hoisted_15, _hoisted_16, _createTextVNode(\" sign in your account now \")])) : _createCommentVNode(\"\", true), $data.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, _toDisplayString($data.errorMessage), 1)) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"button\", {\n    id: \"normal_login_btn\",\n    \"data-step-idx\": \"1\",\n    onClick: _cache[3] || (_cache[3] = (...args) => _ctx.handleClick && _ctx.handleClick(...args))\n  }, _hoisted_21)])])], 32), _hoisted_22])])])]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","id","_hoisted_20","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","onSubmit","_cache","_withModifiers","args","$options","signIn","_hoisted_7","_hoisted_8","tabindex","name","placeholder","type","spellcheck","minlength","maxlength","autocomplete","$data","user","username","$event","_hoisted_9","_hoisted_10","showPassword","required","password","_normalizeClass","onClick","_hoisted_12","isSigningIn","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","errorMessage","_hoisted_17","_toDisplayString","_hoisted_18","_hoisted_19","_ctx","handleClick","_hoisted_22"],"sources":["/Users/foxyy/Desktop/寫好的/電商spring+vue3 final/ijrgoer/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"whole\">\n    <div class=\"background_div\">\n      <div class=\"login_background\">\n        <div class=\"login_div\">\n          <div class=\"login_header_top_div\"></div>\n          <div class=\"login_header_div\">\n            <div class=\"login_header_logo_div\">\n              <img\n                id=\"login_header_logo_img\"\n                class=\"login_header_logo_img\"\n                src=\"../assets/logo.png\"\n              />\n            </div>\n            <div\n              id=\"header_title_text\"\n              class=\"login_header_text_div\"\n              data-langKey=\"index.header.title.text\"\n            >\n              Hello , Welcome Back!\n            </div>\n          </div>\n          <form\n            id=\"login_input_div\"\n            class=\"login_input_div\"\n            @submit.prevent=\"signIn\"\n          >\n            <div class=\"input_sep_line_2\"></div>\n            <div class=\"input_div\">\n              <input\n                tabindex=\"2\"\n                name=\"userid\"\n                id=\"userid_inputtext\"\n                class=\"login_textfield\"\n                placeholder=\"User ID (4 - 20 characters)\"\n                type=\"text\"\n                spellcheck=\"false\"\n                aria-label=\"User ID\"\n                minlength=\"4\"\n                maxlength=\"250\"\n                autocomplete=\"off\"\n                v-model=\"user.username\"\n              />\n            </div>\n            <div class=\"input_sep_line_3\"></div>\n            <div class=\"input_div\">\n              <input\n                tabindex=\"3\"\n                name=\"password\"\n                id=\"password_inputtext\"\n                class=\"login_textfield\"\n                placeholder=\"Password (4 - 20 characters)\"\n                spellcheck=\"false\"\n                aria-label=\"Password\"\n                :type=\"showPassword ? 'text' : 'password'\"\n                minlength=\"6\"\n                maxlength=\"16\"\n                required\n                v-model=\"user.password\"\n              />\n              <i\n                class=\"fa eye password-icon\"\n                @click=\"showPassword = !showPassword\"\n                :class=\"{\n                  'fa-eye-slash': showPassword,\n                  'fa-eye': !showPassword\n                }\"\n              ></i>\n            </div>\n            <div class=\"input_sep_line_4\"></div>\n            <div class=\"login_message_div\" v-if=\"isSigningIn\">\n              <span class=\"line\" id=\"line1\"></span>\n              <span class=\"line\" id=\"line2\"></span>\n              <span class=\"line\" id=\"line3\"></span>\n              sign in your account now\n            </div>\n            <div id=\"error_message\" v-if=\"errorMessage\">{{ errorMessage }}</div>\n\n            <div class=\"login_button_div\">\n              <div class=\"input_div button_div_first_margin_top\">\n                <button\n                  id=\"normal_login_btn\"\n                  data-step-idx=\"1\"\n                  @click=\"handleClick\"\n                >\n                  <div class=\"login_text_div\">\n                    <span\n                      class=\"login_text\"\n                      data-langKey=\"index.button.login.text\"\n                    >\n                      Sign In\n                    </span>\n                  </div>\n                </button>\n              </div>\n            </div>\n          </form>\n          <div class=\"login_bottom_div\"></div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport useJwt from \"../composables/useJwt\";\n\nexport default {\n  data() {\n    return {\n      user: {\n        username: \"\",\n        password: \"\",\n      },\n      showPassword: false,\n      isSigningIn: false,\n      errorMessage: \"\",\n    };\n  },\n  setup() {\n    const { setToken } = useJwt();\n    return {\n      setToken,\n    };\n  },\n  methods: {\n    async signIn() {\n      this.isSigningIn = true;\n      const loginRequest = {\n        username: this.user.username,\n        password: this.user.password,\n      };\n\n      try {\n        const response = await axios.post(\"/api/login\", loginRequest);\n        if (response.status === 200) {\n          console.log(response.data);\n          this.setToken(response.data.token);  // 假設後端回傳的 token 在 response.data.token\n          this.$router.push(\"/dashboard/products\");\n        } else {\n          this.errorMessage = \"Login failed. Please check your credentials.\";\n        }\n      } catch (error) {\n        console.error(\"Login failed:\", error);\n        this.errorMessage = error.response ? error.response.data : \"Login failed. Please check your credentials.\";\n      } finally {\n        this.isSigningIn = false;\n      }\n    },\n  },\n};\n\n</script>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}