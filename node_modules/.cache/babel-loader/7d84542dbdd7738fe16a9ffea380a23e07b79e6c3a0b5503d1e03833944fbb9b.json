{"ast":null,"code":"import modalMixin from '@/mixins/modalMixin';\nexport default {\n  name: 'couponModal',\n  props: {\n    coupon: {}\n  },\n  data() {\n    return {\n      tempCoupon: {},\n      due_date: ''\n    };\n  },\n  emits: ['update-coupon'],\n  watch: {\n    coupon() {\n      this.tempCoupon = JSON.parse(JSON.stringify(this.coupon)); // 深拷貝以避免直接修改 prop\n      if (this.tempCoupon.due_date) {\n        // 將時間格式改為 YYYY-MM-DD\n        const dateAndTime = new Date(this.tempCoupon.due_date * 1000).toISOString().split('T');\n        [this.due_date] = dateAndTime;\n      }\n    },\n    due_date() {\n      if (this.due_date) {\n        this.tempCoupon.due_date = Math.floor(new Date(this.due_date).getTime() / 1000);\n      }\n    }\n  },\n  methods: {\n    // 可以添加其他方法，例如驗證表單數據等\n  },\n  mixins: [modalMixin]\n};","map":{"version":3,"names":["modalMixin","name","props","coupon","data","tempCoupon","due_date","emits","watch","JSON","parse","stringify","dateAndTime","Date","toISOString","split","Math","floor","getTime","methods","mixins"],"sources":["/Users/foxyy/Desktop/寫好的/電商spring+vue3 final/ijrgoer/src/components/CouponModal.vue"],"sourcesContent":["<template>\n  <div class=\"modal fade\" id=\"couponModal\" tabindex=\"-1\" role=\"dialog\"\n       aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">優惠券</h5>\n          <button type=\"button\" class=\"btn-close\"\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"mb-3\">\n            <label for=\"title\">標題</label>\n            <input type=\"text\" class=\"form-control\" id=\"title\" v-model=\"tempCoupon.title\"\n                   placeholder=\"請輸入標題\">\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"coupon_code\">優惠碼</label>\n            <input type=\"text\" class=\"form-control\" id=\"coupon_code\" v-model=\"tempCoupon.code\"\n                   placeholder=\"請輸入優惠碼\">\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"due_date\">到期日</label>\n            <input type=\"date\" class=\"form-control\" id=\"due_date\"\n                   v-model=\"due_date\">\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"price\">折扣百分比</label>\n            <input type=\"number\" class=\"form-control\" id=\"price\"\n                   v-model.number=\"tempCoupon.percent\" placeholder=\"請輸入折扣百分比\">\n          </div>\n          <div class=\"mb-3\">\n            <div class=\"form-check\">\n              <input class=\"form-check-input\" type=\"checkbox\"\n                     :true-value=\"1\"\n                     :false-value=\"0\"\n                     v-model=\"tempCoupon.is_enabled\" id=\"is_enabled\">\n              <label class=\"form-check-label\" for=\"is_enabled\">\n                是否啟用\n              </label>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-primary\"\n                  @click=\"$emit('update-coupon', tempCoupon)\">增加新優惠券\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  name: 'couponModal',\n  props: {\n    coupon: {},\n  },\n  data() {\n    return {\n      tempCoupon: {},\n      due_date: '',\n    };\n  },\n  emits: ['update-coupon'],\n  watch: {\n    coupon() {\n      this.tempCoupon = JSON.parse(JSON.stringify(this.coupon)); // 深拷貝以避免直接修改 prop\n      if (this.tempCoupon.due_date) {\n        // 將時間格式改為 YYYY-MM-DD\n        const dateAndTime = new Date(this.tempCoupon.due_date * 1000)\n          .toISOString().split('T');\n        [this.due_date] = dateAndTime;\n      }\n    },\n    due_date() {\n      if (this.due_date) {\n        this.tempCoupon.due_date = Math.floor(new Date(this.due_date).getTime() / 1000);\n      }\n    },\n  },\n  methods: {\n    // 可以添加其他方法，例如驗證表單數據等\n  },\n  mixins: [modalMixin],\n};\n</script>\n\n"],"mappings":"AAsDA,OAAOA,UAAS,MAAO,qBAAqB;AAE5C,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,KAAK,EAAE;IACLC,MAAM,EAAE,CAAC;EACX,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,CAAC,CAAC;MACdC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,KAAK,EAAE,CAAC,eAAe,CAAC;EACxBC,KAAK,EAAE;IACLL,MAAMA,CAAA,EAAG;MACP,IAAI,CAACE,UAAS,GAAII,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAAC,IAAI,CAACR,MAAM,CAAC,CAAC,EAAE;MAC3D,IAAI,IAAI,CAACE,UAAU,CAACC,QAAQ,EAAE;QAC5B;QACA,MAAMM,WAAU,GAAI,IAAIC,IAAI,CAAC,IAAI,CAACR,UAAU,CAACC,QAAO,GAAI,IAAI,EACzDQ,WAAW,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC;QAC3B,CAAC,IAAI,CAACT,QAAQ,IAAIM,WAAW;MAC/B;IACF,CAAC;IACDN,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAACA,QAAQ,EAAE;QACjB,IAAI,CAACD,UAAU,CAACC,QAAO,GAAIU,IAAI,CAACC,KAAK,CAAC,IAAIJ,IAAI,CAAC,IAAI,CAACP,QAAQ,CAAC,CAACY,OAAO,EAAC,GAAI,IAAI,CAAC;MACjF;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACP;EAAA,CACD;EACDC,MAAM,EAAE,CAACpB,UAAU;AACrB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}