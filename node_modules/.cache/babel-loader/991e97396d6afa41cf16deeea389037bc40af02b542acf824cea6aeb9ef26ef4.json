{"ast":null,"code":"import modalMixin from '@/mixins/modalMixin';\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n      // 多圖範例\n      if (!this.tempProduct.images) {\n        this.tempProduct.images = [];\n      }\n    }\n  },\n  data() {\n    return {\n      modal: {},\n      tempProduct: {}\n    };\n  },\n  methods: {\n    uploadFile() {\n      const uploadedFile = this.$refs.fileInput.files[0];\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadedFile);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http.post(url, formData).then(response => {\n        console.log(response.data);\n        if (response.data.success) {\n          this.tempProduct.imageUrl = response.data.imageUrl;\n        }\n      });\n    }\n  },\n  mixins: [modalMixin]\n};","map":{"version":3,"names":["modalMixin","props","product","type","Object","default","watch","tempProduct","images","data","modal","methods","uploadFile","uploadedFile","$refs","fileInput","files","formData","FormData","append","url","process","env","VUE_APP_API","VUE_APP_PATH","$http","post","then","response","console","log","success","imageUrl","mixins"],"sources":["C:\\Users\\2409\\Desktop\\vue3最新\\vue3\\src\\components\\ProductModal.vue"],"sourcesContent":["<template>\r\n  <!-- Modal -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"exampleModal\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-dark text-white\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span>新增產品</span>\r\n          </h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-sm-4\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"image\" class=\"form-label\">輸入圖片網址</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"image\"\r\n                  v-model=\"tempProduct.imageUrl\"\r\n                  placeholder=\"請輸入圖片連結\"\r\n                />\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"customFile\" class=\"form-label\"\r\n                  >或 上傳圖片\r\n                  <i class=\"fas fa-spinner fa-spin\"></i>\r\n                </label>\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"customFile\"\r\n                  class=\"form-control\"\r\n                  ref=\"fileInput\"\r\n                  @change=\"uploadFile\"\r\n                />\r\n              </div>\r\n              <img class=\"img-fluid\" :src=\"tempProduct.imageUrl\" alt=\"\" />\r\n              <!-- 延伸技巧，多圖 -->\r\n              <div class=\"mt-5\" v-if=\"tempProduct.images\">\r\n                <div v-for=\"(image, key) in tempProduct.images\" class=\"mb-3 input-group\" :key=\"key\">\r\n                  <input\r\n                    type=\"url\"\r\n                    class=\"form-control form-control\"\r\n                    v-model=\"tempProduct.images[key]\"\r\n                    placeholder=\"請輸入連結\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-outline-danger\"\r\n                    @click=\"tempProduct.images.splice(key, 1)\"\r\n                  >\r\n                    移除\r\n                  </button>\r\n                </div>\r\n                <div\r\n                  v-if=\"\r\n                    tempProduct.images[tempProduct.images.length - 1] || !tempProduct.images.length\r\n                  \"\r\n                >\r\n                  <button\r\n                    class=\"btn btn-outline-primary btn-sm d-block w-100\"\r\n                    @click=\"tempProduct.images.push('')\"\r\n                  >\r\n                    新增圖片\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-8\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"title\" class=\"form-label\">標題</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"title\"\r\n                  v-model=\"tempProduct.title\"\r\n                  placeholder=\"請輸入標題\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"row gx-2\">\r\n                <div class=\"mb-3 col-md-6\">\r\n                  <label for=\"category\" class=\"form-label\">分類</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    id=\"category\"\r\n                    v-model=\"tempProduct.category\"\r\n                    placeholder=\"請輸入分類\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3 col-md-6\">\r\n                  <label for=\"price\" class=\"form-label\">單位</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    id=\"unit\"\r\n                    v-model=\"tempProduct.unit\"\r\n                    placeholder=\"請輸入單位\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row gx-2\">\r\n                <div class=\"mb-3 col-md-6\">\r\n                  <label for=\"origin_price\" class=\"form-label\">原價</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    class=\"form-control\"\r\n                    id=\"origin_price\"\r\n                    v-model.number=\"tempProduct.origin_price\"\r\n                    placeholder=\"請輸入原價\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3 col-md-6\">\r\n                  <label for=\"price\" class=\"form-label\">售價</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    class=\"form-control\"\r\n                    id=\"price\"\r\n                    v-model.number=\"tempProduct.price\"\r\n                    placeholder=\"請輸入售價\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <hr />\r\n\r\n              <div class=\"mb-3\">\r\n                <label for=\"description\" class=\"form-label\">產品描述</label>\r\n                <textarea\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"description\"\r\n                  v-model=\"tempProduct.description\"\r\n                  placeholder=\"請輸入產品描述\"\r\n                ></textarea>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"content\" class=\"form-label\">說明內容</label>\r\n                <textarea\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"content\"\r\n                  v-model=\"tempProduct.content\"\r\n                  placeholder=\"請輸入產品說明內容\"\r\n                ></textarea>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <div class=\"form-check\">\r\n                  <input\r\n                    class=\"form-check-input\"\r\n                    type=\"checkbox\"\r\n                    v-model=\"tempProduct.is_enabled\"\r\n                    :true-value=\"1\"\r\n                    :false-value=\"0\"\r\n                    id=\"is_enabled\"\r\n                  />\r\n                  <label class=\"form-check-label\" for=\"is_enabled\">\r\n                    是否啟用\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">\r\n            取消\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            @click=\"$emit('update-product', tempProduct)\"\r\n          >\r\n            確認\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport modalMixin from '@/mixins/modalMixin';\r\n\r\nexport default {\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default() { return {}; },\r\n    },\r\n  },\r\n  watch: {\r\n    product() {\r\n      this.tempProduct = this.product;\r\n      // 多圖範例\r\n      if (!this.tempProduct.images) {\r\n        this.tempProduct.images = [];\r\n      }\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      modal: {},\r\n      tempProduct: {},\r\n    };\r\n  },\r\n  methods: {\r\n    uploadFile() {\r\n      const uploadedFile = this.$refs.fileInput.files[0];\r\n      const formData = new FormData();\r\n      formData.append('file-to-upload', uploadedFile);\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\r\n      this.$http.post(url, formData).then((response) => {\r\n        console.log(response.data);\r\n        if (response.data.success) {\r\n          this.tempProduct.imageUrl = response.data.imageUrl;\r\n        }\r\n      });\r\n    },\r\n  },\r\n  mixins: [modalMixin],\r\n};\r\n</script>\r\n"],"mappings":"AAoMA,OAAOA,UAAS,MAAO,qBAAqB;AAE5C,eAAe;EACbC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,OAAOA,CAAA,EAAG;QAAE,OAAO,CAAC,CAAC;MAAE;IACzB;EACF,CAAC;EACDC,KAAK,EAAE;IACLJ,OAAOA,CAAA,EAAG;MACR,IAAI,CAACK,WAAU,GAAI,IAAI,CAACL,OAAO;MAC/B;MACA,IAAI,CAAC,IAAI,CAACK,WAAW,CAACC,MAAM,EAAE;QAC5B,IAAI,CAACD,WAAW,CAACC,MAAK,GAAI,EAAE;MAC9B;IACF;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,CAAC,CAAC;MACTH,WAAW,EAAE,CAAC;IAChB,CAAC;EACH,CAAC;EACDI,OAAO,EAAE;IACPC,UAAUA,CAAA,EAAG;MACX,MAAMC,YAAW,GAAI,IAAI,CAACC,KAAK,CAACC,SAAS,CAACC,KAAK,CAAC,CAAC,CAAC;MAClD,MAAMC,QAAO,GAAI,IAAIC,QAAQ,EAAE;MAC/BD,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAEN,YAAY,CAAC;MAC/C,MAAMO,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAG,CAACC,WAAY,OAAMF,OAAO,CAACC,GAAG,CAACE,YAAa,eAAc;MACpF,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,GAAG,EAAEH,QAAQ,CAAC,CAACU,IAAI,CAAEC,QAAQ,IAAK;QAChDC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACnB,IAAI,CAAC;QAC1B,IAAImB,QAAQ,CAACnB,IAAI,CAACsB,OAAO,EAAE;UACzB,IAAI,CAACxB,WAAW,CAACyB,QAAO,GAAIJ,QAAQ,CAACnB,IAAI,CAACuB,QAAQ;QACpD;MACF,CAAC,CAAC;IACJ;EACF,CAAC;EACDC,MAAM,EAAE,CAACjC,UAAU;AACrB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}