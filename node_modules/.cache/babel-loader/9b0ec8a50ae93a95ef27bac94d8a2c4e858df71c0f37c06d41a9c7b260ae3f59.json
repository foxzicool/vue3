{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport useJwt from \"../composables/useJwt\";\nexport default {\n  data() {\n    return {\n      user: {\n        username: \"\",\n        password: \"\"\n      },\n      showPassword: false,\n      isSigningIn: false,\n      errorMessage: \"\"\n    };\n  },\n  setup() {\n    const {\n      setToken\n    } = useJwt();\n    return {\n      setToken\n    };\n  },\n  methods: {\n    async signIn() {\n      this.isSigningIn = true;\n      const loginRequest = {\n        username: this.user.username,\n        password: this.user.password\n      };\n      try {\n        const response = await axios.post(\"/api/login\", loginRequest);\n        if (response.status === 200) {\n          console.log(response.data);\n          this.setToken(response.data.token); // Assuming the backend returns the token in response.data.token\n          this.$router.push(\"/dashboard/products\");\n        } else {\n          this.errorMessage = \"Login failed. Please check your credentials.\";\n        }\n      } catch (error) {\n        console.error(\"Login failed:\", error);\n        this.errorMessage = error.response ? error.response.data : \"Login failed. Please check your credentials.\";\n      } finally {\n        this.isSigningIn = false;\n      }\n    },\n    recordVisit() {\n      // 使用 '/api/visit' 来匹配你在 vue.config.js 中的代理设置\n      axios.post('/api/visit', {\n        pageName: 'Login',\n        count: 1\n      }).then(response => {\n        console.log('Visit recorded:', response.data);\n      }).catch(error => {\n        console.error('Error recording visit:', error);\n      });\n    }\n  },\n  created() {\n    this.recordVisit(); // 当组件创建时记录访问\n  }\n};","map":{"version":3,"names":["axios","useJwt","data","user","username","password","showPassword","isSigningIn","errorMessage","setup","setToken","methods","signIn","loginRequest","response","post","status","console","log","token","$router","push","error","recordVisit","pageName","count","then","catch","created"],"sources":["C:\\Users\\2409\\Desktop\\vue3最新\\vue3\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n    <section class=\"hero is-success is-fullheight\">\r\n      \r\n      <div class=\"hero-body\">\r\n        <div class=\"container has-text-centered\">\r\n          <div class=\"column is-4 is-offset-4\">\r\n            <h3 class=\"title has-text-black\">Login</h3>\r\n            <hr class=\"login-hr\">\r\n            <p class=\"subtitle has-text-black\">Please login to proceed.</p>\r\n            <div class=\"box\">\r\n              <figure class=\"avatar\">\r\n                <img src=\"https://via.placeholder.com/150\">\r\n              </figure>\r\n              <form @submit.prevent=\"signIn\">\r\n                <div class=\"field\">\r\n                  <div class=\"control\">\r\n                    <input class=\"input is-large\" type=\"text\" placeholder=\"Your account\" v-model=\"user.username\" autofocus>\r\n                  </div>\r\n                </div>\r\n  \r\n                <div class=\"field\">\r\n                  <div class=\"control\">\r\n                    <input class=\"input is-large\" type=\"password\" placeholder=\"Your Password\" v-model=\"user.password\">\r\n                  </div>\r\n                </div>\r\n                <div class=\"field\">\r\n                  <label class=\"checkbox\">\r\n                    <input type=\"checkbox\">\r\n                    Remember me\r\n                  </label>\r\n                </div>\r\n                <button class=\"button is-block is-info is-large is-fullwidth\" :disabled=\"isSigningIn\">Login <i class=\"fa fa-sign-in\" aria-hidden=\"true\"></i></button>\r\n              </form>\r\n            </div>\r\n            <p class=\"has-text-grey\">\r\n              <a href=\"../\">Sign Up</a> &nbsp;·&nbsp;\r\n              <a href=\"../\">Forgot Password</a> &nbsp;·&nbsp;\r\n              <a href=\"../\">Need Help?</a>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from \"axios\";\r\n  import useJwt from \"../composables/useJwt\";\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        user: {\r\n          username: \"\",\r\n          password: \"\",\r\n        },\r\n        showPassword: false,\r\n        isSigningIn: false,\r\n        errorMessage: \"\",\r\n      };\r\n    },\r\n    setup() {\r\n      const { setToken } = useJwt();\r\n      return {\r\n        setToken,\r\n      };\r\n    },\r\n    methods: {\r\n      async signIn() {\r\n        this.isSigningIn = true;\r\n        const loginRequest = {\r\n          username: this.user.username,\r\n          password: this.user.password,\r\n        };\r\n  \r\n        try {\r\n          const response = await axios.post(\"/api/login\", loginRequest);\r\n          if (response.status === 200) {\r\n            console.log(response.data);\r\n            this.setToken(response.data.token);  // Assuming the backend returns the token in response.data.token\r\n            this.$router.push(\"/dashboard/products\");\r\n          } else {\r\n            this.errorMessage = \"Login failed. Please check your credentials.\";\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Login failed:\", error);\r\n          this.errorMessage = error.response ? error.response.data : \"Login failed. Please check your credentials.\";\r\n        } finally {\r\n          this.isSigningIn = false;\r\n        }\r\n      },\r\n      recordVisit() {\r\n        // 使用 '/api/visit' 来匹配你在 vue.config.js 中的代理设置\r\n        axios.post('/api/visit', {\r\n          pageName: 'Login',\r\n          count: 1\r\n        }).then(response => {\r\n          console.log('Visit recorded:', response.data);\r\n        }).catch(error => {\r\n          console.error('Error recording visit:', error);\r\n        });\r\n      }\r\n    },\r\n    created() {\r\n      this.recordVisit();  // 当组件创建时记录访问\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  \r\n  \r\n  <style>\r\n  @import url('https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css');\r\n  @import url('https://fonts.googleapis.com/css?family=Questrial&display=swap');\r\n  @import url('https://unpkg.com/bulma@0.9.4/css/bulma.min.css');\r\n  </style>"],"mappings":";AA8CE,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,uBAAuB;AAE1C,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACZ,CAAC;MACDC,YAAY,EAAE,KAAK;MACnBC,WAAW,EAAE,KAAK;MAClBC,YAAY,EAAE;IAChB,CAAC;EACH,CAAC;EACDC,KAAKA,CAAA,EAAG;IACN,MAAM;MAAEC;IAAS,IAAIT,MAAM,EAAE;IAC7B,OAAO;MACLS;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,MAAMA,CAAA,EAAG;MACb,IAAI,CAACL,WAAU,GAAI,IAAI;MACvB,MAAMM,YAAW,GAAI;QACnBT,QAAQ,EAAE,IAAI,CAACD,IAAI,CAACC,QAAQ;QAC5BC,QAAQ,EAAE,IAAI,CAACF,IAAI,CAACE;MACtB,CAAC;MAED,IAAI;QACF,MAAMS,QAAO,GAAI,MAAMd,KAAK,CAACe,IAAI,CAAC,YAAY,EAAEF,YAAY,CAAC;QAC7D,IAAIC,QAAQ,CAACE,MAAK,KAAM,GAAG,EAAE;UAC3BC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAACZ,IAAI,CAAC;UAC1B,IAAI,CAACQ,QAAQ,CAACI,QAAQ,CAACZ,IAAI,CAACiB,KAAK,CAAC,EAAG;UACrC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,qBAAqB,CAAC;QAC1C,OAAO;UACL,IAAI,CAACb,YAAW,GAAI,8CAA8C;QACpE;MACF,EAAE,OAAOc,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;QACrC,IAAI,CAACd,YAAW,GAAIc,KAAK,CAACR,QAAO,GAAIQ,KAAK,CAACR,QAAQ,CAACZ,IAAG,GAAI,8CAA8C;MAC3G,UAAU;QACR,IAAI,CAACK,WAAU,GAAI,KAAK;MAC1B;IACF,CAAC;IACDgB,WAAWA,CAAA,EAAG;MACZ;MACAvB,KAAK,CAACe,IAAI,CAAC,YAAY,EAAE;QACvBS,QAAQ,EAAE,OAAO;QACjBC,KAAK,EAAE;MACT,CAAC,CAAC,CAACC,IAAI,CAACZ,QAAO,IAAK;QAClBG,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEJ,QAAQ,CAACZ,IAAI,CAAC;MAC/C,CAAC,CAAC,CAACyB,KAAK,CAACL,KAAI,IAAK;QAChBL,OAAO,CAACK,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAChD,CAAC,CAAC;IACJ;EACF,CAAC;EACDM,OAAOA,CAAA,EAAG;IACR,IAAI,CAACL,WAAW,EAAE,EAAG;EACvB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}